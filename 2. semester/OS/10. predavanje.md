### Večprocesorsko razporejanje in razporejanje v realnem času

- granularnost = delitev na podlagi pogostosti sinhronizacije med procesi v sistemu
- pet nivojev granularnosti:
	- l
- kaj če je sinhronizacijski interval več kot na 20 ukazov:
	- do sedaj obravnavane vzporednosti lahko tečejo na 1 ali več procesorju z že spoznanimi algoritmi
- sicer:
	- pride do večjih sprememb pri razporejanju
	- specializirane, različni pristopi; dedicatet machines (niso ustvarjene z namenom splošne uporabe)

Razporejanje procesov procesorjem:
- treba je dati procese na procesorje
- permanentna dodelitev:
	- proces vedno pride na isti procesor
	- posebne kratkoročne vrste za vsak proces
	- manj dodatnega dela, ker če en proces potuje med procesorju je treba več dela za skladnost pomnilnika
	- eden izmed procesorjev lahko hitro postane nedejaven, medtem, ko je drug neobremenjen
- globalna vrsta:
	- gledamo, kateri procesor je preobremenjen in kateri podobremenjen
	- treba več dela za skladnost pomnilnika

Razporejanje nitk na procesorje:
- hitreje je razporejati niti kot processe
- delitev bremena (load sharing):
	- največkrat uporabljen pristop
- skupinsko razporejanje (gang scheduling):
	- množico sorodnih niti na procesor razporejamo istočasno
	- uporabno, če del aplikacije ne deluje sočasno
	- grupiranje in uteži
	- aplikacija, ki ima več niti dobi več časa
	- ![500](../../Images/Pasted%20image%2020240513142139.png)
	- skupina štirih neodvisnih aplikacij lahko teče v IDLE prostoru
- enkratno razporejanje (dedicated scheduling):
	- nit se bo izvajala na dodeljenem procesorju
	- oblika skupinskega razporejanja
	- če je preveč niti na aplikacijo, pohitritev, ki jo nudi več procesorjev začne padati (več prestavljanja predpomnilnika)
- dinamično razporejanje:
	- eksperimentalno
	- število nitk procesa uravnava dinamično sama aplikacija

Sistemi, ki razporejajo v realnem času:
- splošnonamenski računalniki niso realnočasovni, so pa blizu
- od česa je odvisna pravilnost delovanja realnočasovnega OS:
	- od logične vrednosti rezultata
	- od časa, ki smo ga porabili za rezultat
- dogodki in tempo, s katerim znamo procesirati dogodke
- npr. senzorji imajo dogodke, ki se dogajajo v realnem času v nekem tempu, OS mora slediti temu tempu
- primer:
	- nadzor letalskega prometa, klici, robotika, simulacije, proizvodni procesi
- odziv na dogodke z istim tempom, kot se dogodki dogajajo
- trda vs. mehka realno-časovna zahteva:
	- trda: naloga, ki mora biti narejena (opravljena) do roka
	- mehka: naloga, za katero je zaželjeno, da je narejena do roka, ni pa to nujno
- periodična in aperiodična realno-časovna zahteva/naloga:
	- ![300](../../Images/Pasted%20image%2020240513143454.png)

Posebnosti realno-časovnih OS:
- roki so dani => **d**eterminističnost
	- koliko časa mine od prihoda do potrditvi prekinitve
- **o**dzivnost:
	- koliko časa po potrditvi prekinitve OS rabi, da ji ustreže
- minimiziramo odzivni čas (d + o = odzivni čas (scheduling time))
- imamo popoln uporabniški nadzor zaradi posebnosti delovanja sistema - uporabnik lahko poda prioritete procesov - kateri procesi so rezidenčni, v kakšni meri so rezidenčni
- zanesljivost (fail-soft operation):
	- ob napaki jo poskuša odpraviti ali pa minimizirati njen učinek, pri čemer pa nadaljuje z izvajanjem (no reboot - fail-soft operation)
	- primer fail-soft operacije: RAID diski - če disk crkne, ga lahko zamenjaš, brez da ugasneš sistem
- cilj razporejanja:
	- ![400](../../Images/Pasted%20image%2020240513144302.png)

Pristopi za razporejanje v realnem času:
- statično tabelarno gnano (static table-driven approach):
	- razpored se določi pred začetkom izvajanja
	- primer: razporejanje z roki – razporejanje po principu najzgodnejšega (prvega) roka
	- razporejanj po principu najzgodnejšega roka minimizira število zahtev, ki zgreši rok
	- ![500](../../Images/Pasted%20image%2020240513144704.png)
	- če zgrešimo en rok, ni važno, kaj delamo naprej
	- ![500](../../Images/Pasted%20image%2020240513145136.png)
	- na koncu je B2 na procesorju in z A5 imata enak rok zaključka, zato ostane B2 na procesorju
	- gre za specifičen sistem s specifičnimi dogodki, kjer so vse stvari dane vnaprej
	- razporejanje po principu najzgodnejšega roka z neizsiljenim časom nedejavnosti:
		- nepreklopne zahteve, se ne ponavljajo - neperiodične
		- pogledamo roke vedno, ko pride nov proces na procesor (pri earliest deadline smo v fazi razporejanja določili, katere moramo razporejati in nismo preklapljali med procesi)
		- vemo vnaprej, kaj se bo zgodilo; poznamo celotno stanje sistema, ne samo v trenutku razporejanja
		- ne moremo preklapljati med procesi
		- ![500](../../Images/Pasted%20image%2020240513150009.png)
		- ^ na začetku imamo IDLE procesor, ker bi sicer zamudili B
- statično prioritetno gnano preklopno:
	- omogoča uporabno tradicionalnega prioritetno gnanega razporejevalnika
	- periodične zahteve - če imaš frekvenco, lahko glede na to izračunaš prioriteto