- ![600](../../Images2/Pasted%20image%2020241203115445.png)
- v vmesni stopnje se shranjujejo vrednosti, ki jih želimo poslati do naslednjih stopenj
- v EX stopnji se lahko izračuna naslov za MA stopnjo
- WB - vpis registra nazaj v registrsko enoto
- če sta dva ukaza odvisna, rabimo NO OPERATION dati vmes, ki nič ne naredijo, da drugi ukaz dobi pravilen vhod:
	- zaklepanje - CPE sam doda prazne ukaze med odvisne ukaze
	- premoščanje
	- predikcije pri vejitvah - ko pride do skoka, polni cevovod ob predpostavki, da je pogoj false; v IF in ID lahko brez problema brišemo kaj smo naredili, torej če pride do skoka izgubimo dve urini periodi, če pa do skoka ne pride, nismo izgubili nič
- vmesne stopnje ves čas izvajanja naslednje stopnje hranijo vrednosti
- ![600](../../Images2/Pasted%20image%2020241203115104.png)
- vsi ukazi morajo biti dovolj enostavni, da cevovod ni preveč zakompliciran
- pri CISC kompleksen ukaz razbije na enostavnejše ukaze (mikroopracije), ki jih pošljejo v cevovod

- cevovodna nevarnost:
	- v drugem ukazu se za R3 prebere napačna vrednost, ker prvi ukaz še ni prišel do WB
	- lahko damo vmes NO OPERATION, ali pa damo vmes neke ukaze, ki jih rabimo, ampak ne vplivajo na ta ukaz
	- ![400](../../Images2/Pasted%20image%2020241203115922.png)

Izzivi v cevovodu:
- v cevovodu vsako urino periodo beremo en ukaz - povezava s pomnilnikom je bolj obremenjena (n-krat več branj ukazov na nekem časovnem intervalu)
- potencialno hkratno branje ukaza in dostop do operanda:
	- rešitev: nardimo ločena predpomnilnika za ukaze in operande (kot Harvardska arhitektura, ampak ta je na glavnem pomnilniku, tu je samo Harvardska arhitektura na nivoju predpomnilnika L1, ostalo gor L2 in naprej pa je spet skupaj zapisano)
- vpis v vmesne stopnje porabi nekaj dodatnega časa:
	- ![300](../../Images2/Pasted%20image%2020241203122010.png)
- cevovodne nevarnosti

Cevovodne nevarnosti:
- nastopijo, ko niso izpolnjeni vsi pogoji za pravilno izvedbo (dela) ukaza
- strukturne - ko več zahtev pride na eno napravo, ampak naprava lahko opravlja samo eno opravilo naenkrat
- podatkovne/operandne - ukaz bi rabil nek operand, ampak vsebina tega operanda še ni na voljo
- kontolne (skoki) - mi šele nekje na sredi cevovoda izvemo, če je pogoj izpolnjen ali ne
- 
- osnovni cilj - pravilnost delovanja => nevarnosti moramo ugotoviti in odpraviti
- metode:
	- SW (manj učinkovito)
		- prevajalnik poskrbi za nevarnosti, razvršča ukaze
		- programer ročno optimizira na nivoju zbirnika
	- HW (bolj učinkovito):
		- cevovod se zaklene (isti učinek kot NOOP)
		- premoščanje
- če imamo več stopenj v cevovodu, je lahko več cevovodnih nevarnosti, zato bo počasnejši
- ![500](../../Images2/Pasted%20image%2020241203122810.png)

Strukturne nevarnosti:
- ločimo ukazni in operandni predpomnilnik
- množenje, deljenje ločimo od seštevanja v svoji enoti, ker je množenje bolj kompleksno, ga ne moremo narediti v enem ciklu, torej če bi še en ukaz želel množiti, ne bi moral, ker je enota zasedena - rešitev:
	- dodamo več funkcijskih enot (npr. več množilnikov)
	- lahko razdelimo enoto na več stopenj in imamo cevovodno enoto znotraj cevovoda; funkcijske enote naredimo cevovodne - vsako urino periodo bo ta funkcijska enota lahko sprejela nov vhod
- previdnost:
	- odločitve pri načrtovanju
	- višja cena
- v praksi niso tako pogoste, škodljive