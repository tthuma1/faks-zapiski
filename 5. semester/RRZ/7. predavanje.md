- zadnjič smo delali Hough transform za iskanje premic, danes bomo isto uporabili za iskanje krožnic
- enačba krožnice: $x^2 + y^2 = r$ oz. $(x - \bar{x})^2 + (y  - \bar{y})^2 = r^2$
- imamo tri parametre $\bar{x}$, $\bar{y}$ in ${r}$
- dobimo 3D akumulatorsko polje
- zadnjič smo rekli, ko najdemo točke, ki ležijo na premici, naredimo linearno regresijo, da dobimo oprimalne parametre, ki se najbolje prilegajo tej premici
- če vemo, katere točke so na krožnici, potem samo prilegamo krožnice tem točkam in rečemo, da je prava tista, ki se najbolj prilega točkam

- za vsako točko na robu, pogledamo, katere vse krožnicec grejo skozi to točko:
	- npr. radij smo določili $r=2$
	- npr. katere so vse krožnice radija 2, ki grejo skozi to točko - med njimi bo zagotovo tudi pravilna; problem postane 2D
	- iz ene točke dobimo množico središč krožnic, na katerih leži ta točka
- če želimo najti krožnice za katerikoli $r$, potem rabimo isto ponoviti za vse smiselne radije:
	- določimo nek $r$ in izračunamo vse možne $\bar{x}$, $\bar{y}$, - tam kjer se jih največ seka, je pravilna krožnica pri tem $r$
	- potem gledamo v 3D, katere parametre ima največ točk na originalni sliki - tam je pravilna krožnica
	- dobimo tenzorje, namesto vektorjev, ker smo v 3D
- vedno bomo določili nek $r$ in potem računali vse  $\bar{x}$, $\bar{y}$, ki jih je možno fittati na našo točko v sliki pri tem $r$

- vsaka točka na sliki se preslika v stožec v parametričnem prostoru:
	- stožec je zato, ker se možen $r$ povečuje, zato na eni strani v parametričnem prostoru dobimo majhne krožnice, na drugi pa večje krožnice - v 3D se to združi v stožec

- če radij poznamo vnaprej, ga hardcodiramo in si poenostavimo eno dimenzijo:
	- če imamo točen radij, se bodo vse krožnice v parametričnem prostoru sekale v eni točki
	- če iščemo premajhen ali prevelik radij, kot je zares, se bodo krožnice v parametričnem polju sekale okrog radija, ker overshootajo/undershootajo

- v splošnem na kameri namesto krožnic vidimo elipse, ker gledamo pod kotom
- za elipso imamo 5 parametrov:
	- če je axis-aligned imamo 4 parametre
- če bi delali Hough transform, bi imeli 5D (ali 4D) prostor, ki je zelo redek - to je prepočasi za računanje

- uporabimo posplošeno Houghovo transformacijo (GHT):
	- primerna za katerokoli parametrizirano obliko
	- v naši obliki posejemo množico točk - če na sliki najdemo množico točk v taki obliki, potem smo našli to obliko
	- naredimo r-tabelo:
		- v to tabelo vnašam opisnike teh točk, ko gremo okrog naše oblike
		- po vrsticah imamo $\phi$
		- vsaka točka ima svoj $r_i$ in $\beta_i$ => $r_i$ nam pove razdaljo, $\beta_i$ pa smer
		- če za množico točk ugotovimo, da kažejo v isti center, potem je to zelo možno tisti center, ki ga iščemo
		- v bistvu dobimo opis vektorja
		- za referenčno točko navadno vzamemo centroid
		- pri krožnicah so tudi v bistvu vsi vektorji kazali v isti center, ko smo imeli pravilen $r$
		- dodamo kot $\phi$ med $\beta$ in gradientom => kot od $\phi$ nam v bistvu pove gradient - vemo, da nam ta točka vodi v center predmeta v smeri $\beta$
	- r-tabelo polnimo v fazi učenja
	- z r-tabelo dobimo parametre, ki jih iščemo na sliki:
		- gremo po točkah predmeta na sliki in za vsako točko izračunamo gradient, potem pogledamo v to vrstico v r-vrstici za ta $\phi$ - narišemo iz te točke vse vektorje v tej vrstici - vsak vektor da en glas
		- tam, kjer je največ glasov za vektorje iz vseh točk, tam je center našega predmeta, ki ga iščemo
	- r-tabela je v bistvu akumulatorsko polje:
		- konci puščič so glasovi
	- če kamero oddaljimo, bo predmet na sliki manjši:
		- če je velikost predmetov fiksna, potem naša r-tabela v redu dela
		- če se velikost spreminja, rabimo spreminjati velikosti $r$-jev
	- če zarotiramo predmet, se bodo tudi koti spremenili - dodata se še dva parametra da dobimo še robustno spremembo skale in rotacije
	- dobimo 4D akumulatorsko polje: referenčna točka + skala + rotacija
	- v r-tabeli hranimo vektorje premika

Detekcija predmetov z GHT:
- recimo, da imamo avto:
	- kolesa je lažje detektirati kot cel avto - zato detektiramo kolesa in iz njih si zapišemo centroid avta
	- ko na novi sliki zaznamo kolo, je center ali na eni, ali na drugi strani avtomobila - tam, kjer sta oba glasova, je pravi center
	- kolesa so v tem primeru "vizualne besede" - predmeti, ki jih je lažje zaznati in nam skupaj povejo, kje je dejanski cel predmet

RANSAC:
- primer:
	- vemo, da je samo ena premica na sliki
	- iterativen postopek
	- najprej naključno izberi nekaj točk - za premico rabimo minimalno dve točki (RANSAC vedno vzame minimalno število točk)
	- vidimo, kako velika je vsota vseh napak za to premico in koliko točk leži blizu te premice (inlier)
	- tista premica, na katerih je največ inlierjev bo zmagala
	- ko dobimo vse inlierje, na njih naredimo least square fit, da dobimo najboljši fit za premico na teh točkah
- z RANSAC se lahko znebimo šumnih točk, če vemo, da je ena krožnica

- če že vemo, katere točke so na krožnici, samo naredimo least square fit
- če vemo, da je ena krožnica, ampak imamo še nek šum, naredimo RANSAC in potem least square fit
- če imamo več krožnic, bomo naredili Hough in potem least square fit
- če se le da, skušamo zmanjšati število parametrov; želimo čim bolj zmanjšati dimenzijo problema

### Robotika

- rutinski industrijski roboti (s tem se bomo mi ukvarjali)
- avtonomni roboti


Robotski (industrijski) manipulator:
- povratnozančno voden (feedback loop):
	- ne rečeš mu samo, naj se premika za 500ms, ampak imaš vedno nek odziv, ali se je premaknil na pravo mesto
	- senzorji s povratno zanko nam povejo, ali smo se premaknili tja, kamor smo želeli
	- senzorji:
		- notranji: merijo hitrost, razdaljo
		- zunanji: kamera, senzorji sile dotika
- reprogramibilni
- večnamenskost:
	- odvisno kaj mu daš v roko, dela različne stvari
- fiksni ali mobilni
- tri ali več prostostnih stopenj (degrees of freedom):
	- kakšno je minimalno število parametrov s katerimi lahko opišem nek premik
	- če imamo dva parametra, ki sta odvisna med sabo, potem je to v bistvu samo en parameter (ena prostostna stopnja)
	- 1 prostostna stopnja - gibanje po premici, po nihalu (ker sta x in y medsebojno povezana)
	- 2 prostostni stopnji (2 DOF) - gibanje kroglice po mizi
	- 3 prostostne stopnje (3 DOF) - gibanje kroglice v 3D prostoru (x, y, z)
	- v splošnem imamo še orientacijo po x, y in z osi - dobimo 6 DOF (3 za pozicijo in 3 za orientacijo)

- pozicija + orientacija = lega
- da lahko prijemalo premikamo po 6 DOF, rabimo 6 segmentov na prijemalu:
	- 3 dolge segmente za pozicijo - roka
	- 3 kratki segmenti za orientacijo - zapestje
	- manipulator = roka + zapestje

Dve vrsti sklepov:
- vsak sklep ima 1 DOF
- sklep povezuje dva segmenta
- rotacijski sklep - zasuka en segment
- translacijski sklep - spremeni razdaljo
- ponavadi imamo bodisi vzporedne bodisi pravokotne osi:
	- vsak sklep je lahko vzporeden ali pravokoten na našo os

- v praksi uporabljamo pet različnih rok, čeprav je možnosti 3\*2\*2

Antropomorfna robotska roka:
- vsi sklepi so rotacijski
- oponaša človeško roko
- dosežemo neko sfero z omejenim radijem

Sferična roka:
- RRT sklepi
- spet dosežemo sfero, ampak s translacijo delamo različne radije
- zaden sklep je translacijski

SCARA:
- RRT, ampak je delovni prostor podoben valju

Cilindrična:
- RTT

Kartezična:
- TTT, delovni prostor kvader
- npr. 3D printer

Zapestje:
- z roko želimo pokriti čim večji prostor, zapestje si želimo čim manjše, da bo pozicija vedno ista in spreminjamo samo orientacijo
- presečišče osi je v eni točki, ki ne spreminja pozicije - vrh zapestja

Prijemala:
- prsti (dva, tri, več)
- vakuumska - prisesa predmet
- magnetna - da ga namagnetiš, spustiš čez tok
- lahko imamo tudi druga orodja namesto prijemala (varilna glava, pršilo za barvanje)

Delovni prostor:
- dosegljivi in priročni
- priročni je manjši od dosegljivega
- v priročnem lahko dejansko nekaj primemo, tam orientiramo zapestje
- če samo barvamo, je dosegljivi v redu

Kinematika:
- direktna kinematika - vhod so koti sklepov in iz tega zna izračunati, kakšna je lega vrha robota, da veš, kje se robot nahaja
- inverzna kinematika:
	- imamo nek predmet na mizi, ki vemo, kje je
	- vhod je lega (znam opisati koordinatni sistem prijemala (vrha robota)) - želim izračunati, kakšni morajo biti koti, da bomo prišli do tja

Kolokvij primer:
- povečati kontrast za 50% - vsako intenziteto piksla množiš z 1.5
- distance tranform ne bo