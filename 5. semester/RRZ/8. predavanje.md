### Homogene transformacije

- podobno kot pri računalniški grafiki
- na kakšen način manipulator spravimo v tako lego, da bo lahko prijel predmet, ki je v neki legi
- velikokrat imamo ravno mizo, zato Z os ni toliko pomembna
- npr. če imamo nek robot, ki ima pritrjeno kamero - rabimo iz KS kamere pretvoriti v KS robota in v KS sveta
- na vajah imam 5 DOF, torej imamo 5 KS - KS od sklepov nad enim sklepov, so odvisni od KS spodnjega sklepa

- direktna kinematika - kakšna bo lega glede na sklepe in tranformacije
- inverzna kinematika - kakšne transformacije rabimo, da se premaknemo iz ene lege v druge
- danes bomo delali direktno kinematiko

- pozicija = x,y,z težišča
- orientacija = pitch,roll,yaw rotacije
- lega = pozicija + orientacija

- pri robotih imamo samo translacijo in rotacijo
- pozicija = vektor iz izhodišča

Rotacija:
- orientacija = eulerjevi koti ali kvarternioni; mi bomo uporabljali eulerjeve kote oz. matriko s sin in cos od tega kota da opišemo orientacijo
	- ![400](../../Images4/Pasted%20image%2020251205085834.png)
	- če rotiramo po osi X, se X ne bo spremenil, zato rabimo tam 1 in ničle
- inverz je transponirana matrika:
	- ![200](../../Images4/Pasted%20image%2020251205085935.png)
- če se samo rotiram brez translacije, potem samo množin matrike med sabo
- ![300](../../Images4/Pasted%20image%2020251205090021.png)

Translacija:
- samo dodaš vektor $^0d_1$
- če KS nista vzporedna, moraš pred translacijo še rotirati
- ![200](../../Images4/Pasted%20image%2020251205090827.png)

- če želimo iz KS0 v KS1 in potem v KS2 dobimo klobaso z rotacijo in seštevanjem $d$  => zato raje rotacijo in transformacijo homogeniziramo v skupno matriko
- ![500](../../Images4/Pasted%20image%2020251205091116.png)
- ^na desni strani enačbe dobimo levo zgoraj rotacijo in desno zgoraj translacijo - te matrike lahko samo množimo 

- če je rotacija 0, dobimo identiteto na strani rotacije
- ![500](../../Images4/Pasted%20image%2020251205091742.png)

- če množimo homogene transformacijske matrike med sabo, lahko preidemo iz KS enega dela robota v KS drugega dela

- da preslikamo cel KS0 v KS1, najprej pogledamo, kam se nam preslika izhodišče (0,0,0), potem kam se preslika enotski vektor po x (1,0,0), po y(0,1,0) in po z(0,0,1) => dobimo novo izhodišče in nove bazne vektorje v KS1
- novi vektorji bodo še vedno dolžine 1 in pravokotni med sabo, ker smo jih samo rotirali in translirali
- homogoen transformacijska matrika nam zakodira lego novega KS iz starega KS => zadnje stolpec je pozicija novega KS, v prvem stolpcu kako je x orientiran v novem KS, v drugem kako je y, v tretjem kako je z orientiran
- ![150](../../Images4/Pasted%20image%2020251205093002.png)
- ^novi x ni nič obrnjen kot stari x, je enako obrnjen kot stari y in nič kot stari z => novi x je enako obrnjen kot stari y
- lahko direktno iz matrike preberemo, kakšna je lega enega KS iz izhodiščnega KS

- 4x4 matrika nam predstavlja lego in s 4x4 matriko lahko spreminjamo lego
- te dve matriki lahko zmnožimo med sabo

Premultiplikacij:
- $C$ = koordinatni sistem
- se zgodi, da najprej rotiramo in potem transliramo
- če KS premultipliciram s transofrmacijsko matriko, dobimo vrstni red od zadaj naprej kot je bilo pri množenju, ko smo sestavljali transformacijsko matriko
- glede na referenčni (globalni) KS

Postmultiplikacija:
- delamo najprej translacijo in potem rotacijo glede na lasten (lokalni) koordinatni sistem (ne glede na referenčni/globalni KS)

- edini primer, ko je vseeno ali delamo post ali premultiplikacijo je, če množimo z identiteto (ker je transformacijska matrika ista)

- s tem bomo lahko izračunali kakšna je lega vrha manipualtorja glede na KS dna manipulatorja

### Geometrijski model robota

- želimo dobiti lego vrha manipulatorja v KS dna manipulatorja (prijemalo izrazimo s spremembami od rame)
- ![400](../../Images4/Pasted%20image%2020251205101133.png)
- želimo pritrditi en KS na levo in na desno stran - povedala nam bosta, kakšna je lega segmentov
- ko se premakne seg i-1, se bo premaknil tudi seg i
- Z os gre vedno skozi os segmenta
- $z_i$ gre skozi os $i+1$

- če imamo dve premici, obstaja natanko ena premica, ki je pravokotna na obe (je skupna normala)
- ko se segment $i$ premika, se z njim premika KS $i$
- želimo KS $i$ izraziti s KS $i-1$, torej želimo KS $i-1$ premakniti v KS $i$:
	- rabimo dve translaciji in rotaciji
	- najprej premaknemo KS $i-1$ na normalo od KS $i$ (premaknemo gor za $d_i$ vzdolž $z_{i-1}$)
	- potem rotiramo okrog $z_{i-1}$ za $\theta$, tako, da se $x_{i-1}$ in $x_i$ poravnata
	- nato $O^{'}_i$ premaknem po normali do $O_i$
	- potem rabimo še poravnati $z^{'}_i$ in $z_i$ => rotiramo okrog $x_i$
- $d_i$ je ponavadi 0 in se ne spreminja
- $\theta$ se spreminja
- $a_i$ ne spreminja (pove razdaljo med osema)
- $\alpha$ se ne spreminja

- če imamo rotacijski sklep, se spreminja samo $\theta$; če pa imamo translacijski sklep, se samo $d_i$ spreminja, ostali DH parametri pa se ne spreminjajo

- če sta $z$ osi vzporedni, je neskončno normal, ki so pravokotne na obe $z$ osi - v tem primeru si je najlažje izbrati $d = 0$

Izjeme:
- $z$ osi ($z_i$ in $z_{i-1}$) vzporedni => $d=0$
- $z$ osi sta pravokotni => $O_i$ je že v presečišču, rabimo samo rotirati
- bazni (0-ti) segment - izhodišče si poljubno izberemo oz. ga postavimo v prvi sklep
- vrh robota (prijemalo) nima z-osi => $z_n$ naj bo vzporeden $z_{n-1}$

- imamo translacijo in rotacijo glede na stari KS in translacijo in rotacijo glede na novi KS
- ![500](../../Images4/Pasted%20image%2020251205104738.png)
- zgornja matrika je premik po z in rotacija okrog z
- srednja matirka je premik po x in rotacija okrog x
- v prvem koraku delamo okrog lokalnega KS, potem pa okrog KS' (vmesnega KS)
- na izpitu pusti rezultat kot produkt teh dveh matrik, n rabiš jiju dejansko množit