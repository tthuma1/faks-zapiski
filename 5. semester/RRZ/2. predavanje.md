Slika kot diskretna funkcija:
- preslikamo iz koordinatnega sistema v mrežo $u,v$

- običajno imamo za sliko matriko $m \times n$

Ločljivost slike:
- DPI
- imamo 3D svet, kjer merimo v metrih (X,Y,Z) - to preslikamo v 2D (x,y) - to preslikamo v 2D piksle (px,py)
- rabimo vedeti koliko metrov nam predstavlja en slikovni element npr. pri satelitih je lahko en piksel enak 30cm
- CCD senzor - določeno število fotoobčutljivih elementov (vrstic in stolpcev)
- DPI nam pove koliko teh svetlobnoobčutljivih elementov je na enem inchu (1 in = 2.54 cm)
- preračunavamo piksle v metre in obratno

- ![400](../../Images4/Pasted%20image%2020251007133036.png)
- ^ izhodišče je lahko drugje, odvisno katero knjižnico za obdelavo slik uporabljamo

- binarne slike - vsak piksel ima dve možni vrednosti; to so črno-bele slike, samo čisto črna in čisto bela; take slike uporablja npr. faks
- ponavadi imamo do 16 bitov na piksel - rabiš dovolj dobro kamero, da to res lahko izkoristiš

- 8-bitna intenziteta slike - $2^8$ možnih barv

Binarne slike:
- kadar bomo mi delali s tem, bomo uporabljali segmetirane slike
- ![300](../../Images4/Pasted%20image%2020251007133454.png)

Barvne slike:
- R, G in B kanali

- intenzitetna slika - bolj svetla točke je bolj osvetljena
- globinska slika - bolj svetla točka je bližje kameri
- ![400](../../Images4/Pasted%20image%2020251007133708.png)

Vrste kamer:
- za vidno svetlobo
- za bližnjevalovna infra rdeča - osvetljuje prostor z IR, ki je ljudje ne vidimo, ampak kamera vidi - dobimo night vision, zaznavanje gibanja
- dolgovalovna IR - dobimo temperaturno sliko (FLIR)
- teraherčna svetloba - gre skozi obleke, ampak vidi kovinske predmete in podobno

- vse različne slike so na koncu matrika števil, ki jih procesiramo z nekimi algoritmi
- mi bomo vedno delali z rastrskimi slikami:
	- želimo nekompresirano sliko, da nimamo artefaktov po nepotrebnem

- glave datotek:
	- namesto, da gledamo filename, da ugotovimo format, preberemo glavo datoteke
	- pove nam tipično dimenzije in v kakšnem vrstnem redu so piksli sestavljeni (npr. vsi R, vsi G, vsi B ali RGB,RGB,RGB ...)

Histogram:
- koliko pikslov ima vrednost x od 0 do 255
- želimo si, da je histogram čim bolj raztegnjen - imamo tako temne kot tudi svetle elemente na sliki, ki so enakomerni porazdeljeni; nimamo prekomerno temne ali svetle slike
- ko je histogram raztegnjen, lahko predstavimo največ informacij o sceni
- rabimo v redu nastaviti zaslonko in čas ekspozicije, da dobimo ravno prav veliko fotonov
- več fotonov kot pade, večja bo intenziteta - lahko preštejemo do 255 fotonov

- različne slike imajo lahko isti histogram, ker izgubimo prostorsko informacijo
- če je histogram skrčen, ima slab intenzitetni obseg (contrast range):
	- ![400](../../Images4/Pasted%20image%2020251007135402.png)
	- logaritmični histogram nam pomaga, ker povdari majhne vrednosti, da vidimo, da so tam

- nasičeni piksli - npr. ko slikamo neko sceno z nebom in nas nebo ne zanima, ga lahko pustimo, da je zelo svetel (zadane omejitev 255, čeprav je v bistvu še svetlejši)

Dinamični obseg:
- pove nam število različnih vrednosti na sliki
- če raztegnemo histogram, bo dinamični obseg še vedno enak, čeprav bo intenzitetni obseg večji - to se nam splača narediti, ker sliko potem lažje obdelujemo, ker je bolj kontrastna
- če raztegnemo histrogram vmes dobimo luknje
- ![300](../../Images4/Pasted%20image%2020251007140001.png)
- ![300](../../Images4/Pasted%20image%2020251007140029.png)

- kompresija nam ponavadi pokvari robove (razen če je brezizgubna)

- 8-bitne slike nam dajo 256 košev (binov) na histogramu
- tipično imamo pri 8-bitni sliki 32 binski histogram - v ničti koš gredo piksli od 0 do 2 itd.
- dobimo manjši histogram, ki ni tako redek
- računanje košev:
	- ![500](../../Images4/Pasted%20image%2020251007140559.png)

Histogrami barvnih slik:
- lahko naredimo histogram sivinske slike ali pa naredimo 3 histograme
- 3D RGB histogram:
	- ![400](../../Images4/Pasted%20image%2020251007140907.png)
	- imamo trojčke za vsako barvo - če je ta barva prisotna na sliki, bo narisana na histogramu

Kumulativni histogram:
- koliko pikslov ima vrednost x ali manj
- dobimo naraščujočo funkcijo
- kjer so špice na navadnem histogramu, bo kumulativni hitreje naraščal
- na desni strani je vrednost histograma enaka številu pikslov

Točkovne operacije:
- vsakemu pikslu spremenijo vrednost po neki forumli
- funkcija za spremembo piksla je enostavna - odvisna samo od prejšnje vrednosti tega piksla, ne od okolice
- pri nehomogeni operaciji je nova vrednost odvisna tudi od lokacije piksla, pri homogeni pa samo od vrednosti piksla
- primeri:
	- Homogene operacije:
		- spreminjanje svetlosti in kontrasta
	- Nehomogene transformacije
		- lokalno adaptivno upragovljenje
- primeri:
	- spreminjanje kontrasta: $f(a) = a \cdot 1.5$
	- če množimo, povečujemo kontrast (razliko med količino temnih in svetlih pikslov), če prištevamo, spremenimo svetlost
	- upragovljenje (threshold) - na ta način binariziramo sliko (npr. beli bodo predmeti, črno bo ozadje):
		- kako najbolje postaviti prag
		- pri strojnem vidu sami postavljamo kamero in luči - naštimamo tako, da bomo dobili čim boljši prag
		- globalno upragovljanje - enak prag za celo sliko
	- lokalno upragovljanje:
		- za različne dela slike imamo različne pragove
		- ![500](../../Images4/Pasted%20image%2020251007144202.png)

Primer: osvetlim sliko za 3 svetlobne nivoje
- histogram se premakne v desno
- če potemnimo sliko za 3 nivoje, se histogram premakne v levo

Avtomatska nastavitev kontrasta:
- raztegnemo histogram po celi dolžini (da zaseda 255 vrednosti) in zamaknemo tako, da se začne na 0 - dobimo histogram, ki se razteza od 0 do 255 kar je uporabno, ker je kontrast večji
- vmes dobimo prazne prostore
- ![500](../../Images4/Pasted%20image%2020251007145346.png)
- zgornjo in spodnjo mejo lahko naredimo bolj robustno:
	- npr. ko iščemo mejo, spustimo 5% ekstremov, ker je to najbrž šum
	- ![500](../../Images4/Pasted%20image%2020251007145412.png)

Izenačenje histograma (histogram equalization):
- vseh pikslov vsake barve naj bo približno enako
- dobimo ravno črto za histogram
- najprej narišemo kumulativni histogram
- vsak bin iz kumulativnega histograma premaknemo levo ali desno tako, da se zabije v linearno funkcijo
- uporabljamo, da naredimo presvetle in pretemne slike bolj primerne
- uporabno, če želimo zanemariti vpliv osvetlitve:
	- npr. ko slikamo obraze, bom enkrat bolj svetel, enkrat pa bolj temen

### Barvne slike
- v industriji večinoma uporabljamo samo intenzitetne slike
- včasih z barvo lahko lažje segmentiramo sliko

Barvni prostor RGB:
- vsaka barva je točka v kocki

Dva načina organizacije barvnih slik:
- po komponentah - najprej vse rdeče, potem vse zelene, potem vse modre
- paketen vrstni red - RGB,RGB,RGB ...

Indeksirane slike:
- da ne rabimo 8 bitov za vsako barvo, naredimo barvno paleto - barva 0 se preslika na r0,g0,b0; barva 1 na r1,g,1,b1 ...
- prihranimo prostor

Konverzija v sivinske slike:
- povprečje ali razmerje prilagodimo za človeško oko 0.3R, 0.6G, 0.1B
- za stroj je vseeno, kaj naredimo za konverzijo v sivino
- iz sivinske v barvno ne gre enolično

- HSV
- če hočemo npr. zaznati rdeče prometne znake, se nam bolj splača HSV, ker nam že hue dosti pove

- 3D histogram:
	- lahko imamo za vsako barvo (trojček RGB) svojo točko
	- lahko na vsako ploskev kocke narišemo eno barvo v odvisnosti od ene druge - malo manj močan prikaz

### Regije

Primer celic:
- najprej z upragovljanjem dobimo binarno sliko (celice so temne, ozadje je svetlo)
- nato čiščimo, labeliramo (barvamo)

Morfološki filtri.
- nova vrednost piksla je odvisna od prejšnje vrednosti piksla in od okolice (od oblike okolice)
- z njimi odstranimo premajhne elemente, polnimo majhne luknje in iščemo obrise
- lahko naredimo, da če je dovolj sosednjih pikslov prižganih, bomo prižgali tudi trenutni piksel, sicer bomo ugasnili:
	- po tem vsi predmeti ratajo manjši - jih moraš nazaj povečati
	- premajhni predmeti se ti bodo popolnoma zbrisali
	- temu rečemo krčenje in rast

Sosednji piksli:
- lahko si delijo stranice ali pa stranice in oglišča (4-sosednost in 8-sosednost)

- namesto, da sliko predstavimo z ničlami in enkami, samo povemo, kje so enke
- šteti začnemo v morfološkem jedru (hot spot, orgini)

Osnovne binarne operacije:
- invertiranje
- ALI - unija
- translacija - vse točke premakneš desno
- zrcaljenje