Časovniki s HAL:
- hal_tim.c in hal_tim.h
- `HAL_TIM_Base_Init()` funkcija inicializira bazo časovnika, argument je časovnik

Vsaka priferna naprava je v HAL-u abstrahirana s tremi strukturami:
1. instanca - pove kateri registri pripadajo posamični napravi oz. abstrahira registre. Struktura za Timer je deklarirana v Header-ju (hal_tim.h) -> za časovnik je to TIM_TypeDef. S to strukturo se definira en kazalec. Za vsako napravo se potem dodeli en kazalec
	- primer deklaracije `TIM_TypeDef* TIM3=0x40000400`
	- `TIM->CR1` - dostop do control registra časovnika
2. INIT -> to je podatkovna struktura, ki na programerju prijazen način abstrahira inicializaciske elemente naprave
3. rokovalnik (handler) - to je struktura, ki združuje instanco in INIT in doda še nekaj parametrov za vsako V/I napravo -> za časovnik je to TIM_HandleTypeDef. Če naprava potrebuje še kaj, pri tej strukturi doda parametre, tldr. enkapsulira INSTANCO in INIT.

- funkcije take naprave prebere rokovalnik in nato iz strukture INIT bere parametre in jih prepisuje v strukturo INSTANCE (kar so ubistvu registri) - funkcija bere iz INIT v registre.
- kazalcu na instanco nastavimo vrednost, ki pove na katerem naslovu se nahaja naprava, nato nastavimo inicializiske elemente

- poleg časovne baze ima časovnik tudi enega ali več primerjalnih registrov (ponavadi 4). Imenujejo se TIM_CCRx (CCR - Capture and Compare Register). Primerja se z TIMx_CNT (števec), in če je enak, potem lahko časovnik krmili zunanje naprave. Ko se CNT izenači s tem kanalom se aktivira PIN ali pa sproži INT (prekinitev). Tako lahko označimo čas znotraj nekega časovnega obdobja ko hočemo, da se nekaj zgodi, npr.
	- ura je čas? (ali je CNT enak CRR)
		- ne
	- ura je čas? (ali je CNT enak CRR)
		- da
		- PIN/INT akcija

- časovnik lahko vklapja in izklaplja zunanje naprave brez posredovanja CPE - to je dobro za periodna opravila

- TIM_CCRx se nahaja v CCCRx kanalu (Capture and Control Channel)
