- verižna replikacija - lahko nam odpove N-1 procesov
- če nam en proces vmes odpove, moramo narediti prevezave, da na novo vzpostavimo verigo - rabimo nadzorni proces (nadzorna ravnina)

### Replikacija z voditeljem

- gledamo na to, da se procesi znajo sami zmeniti, da sami med samo dobijo konsenz, kdo bo voditelj
- tudi če voditelj odpade znajo dobiti novega voditelja

Algoritmi:
- Paxos - precej kompleksen, malo luknjičasto napisana dokumentacija
- raft - bistveno bolj enostaven, v kritičnih situacijah traja malo dlje, da se stvari razrešijo; če so strežniko razpršeni po svetu, bo Paxos bolj primeren

- napake, ki jih rabimo razrešiti:
	- proces umre, komunikacija pade dol, vrstni red sporočil ni pravi

- procesi morajo zbrati voditelja in ko ga imajo, ta skrbi za zapise v shrambi
- dva končna avtomata - en za vlogo voditelja, drugi za vpisovanje v bazo
- voditelj pošilja vhodne znake v shrambe:
	- če ima shramba končno stanj, končno ukazov, ki si sledijo v pravem vrstnem redu, bodo shrambe vseh procesov eventually enake

### Raft

- čas teče v volilnih obdobjih (ang. term)
- nove volitve se začnejo zaradi težav v sistemu - nekdo ne dobiva paketov
- skrbimo za:
	- izbira voditelja
	- replikacija dnevnika
	- zagotavljanje odpornosti

Stanja končnega avtomata:
- sledilec, kandidat, voditelj
- sledilec:
	- ves čas posluša voditelja in mu sledi, dokler je glasen
	- voditelj mora periodično obveščati sledilca
	- če v času X (če časovnik poteče) ne dobi sporočila od voditelja, sproži nove volitve in postane kandidat - začne se novo volilno obdobje - proces, ki je sprožil volitve voli sam zase
	- vsak proces voli natanko enkrat
- kandidat:
	- če se volitve ne zaključijo dovolj hitro, sproži novo volilno obdobje
	- na začetku raft skonfiguriramo na liho število procesov in za zmago na volitvah rabiš večino glasov od tega začetnega števila